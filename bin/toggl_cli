#!/usr/bin/env ruby

require 'toggl_cli'

@toggl_cli = TogglCLI.new

command = ARGV[0]
if !command
  puts "Please specify a command"
  exit 1
end

case command
when 'start'
  project = ARGV[1]
  description = ARGV[2]
  @toggl_cli.start(project, description)
  puts "Timer Started"
when 'stop'
  result = @toggl_cli.stop
  duration = (result['duration'].to_i / 60.0).round(2)
  puts "Timer Stopped. Duration: #{duration} minutes."
when 'today'
  result = @toggl_cli.today
  puts "You have logged #{result} minutes or #{(result/60.0).round(2)} hours today"
else
  puts "Uh-oh! I haven't learned that command yet"
end
